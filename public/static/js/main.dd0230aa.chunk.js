(this["webpackJsonpget-scripts"]=this["webpackJsonpget-scripts"]||[]).push([[0],{100:function(e,t,s){},102:function(e,t,s){},103:function(e,t,s){},115:function(e,t,s){},145:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s(1),o=s.n(n),i=s(64),c=s.n(i),r=s(7),l=s(3),p=s(4),u=s(6),h=s(5),d=(s(72),s(9)),j=s(15);var m=function(e,t){var s="dark"===t?{background:"black",color:"white"}:{background:"white",color:"black"};return function(t){return Object(a.jsx)(e,Object(j.a)(Object(j.a)({},t),{},{style:s}))}},g=s(8),b=s(2),f=s.n(b),O=(s(89),function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={search:""},e.handleInput=function(t){var s=t.target,a=s.value,n=s.name;e.setState(Object(g.a)({},n,a)),e.props.filterUsers(a)},e.closeSearchbar=function(){e.setState({search:""}),e.props.filterUsers("")},e}return Object(p.a)(s,[{key:"render",value:function(){return Object(a.jsxs)("div",{className:"search-container",children:[Object(a.jsxs)("div",{id:"search",children:[Object(a.jsx)("i",{class:"fas fa-search search-icon"}),Object(a.jsx)("input",{type:"text",className:"input search-bar",name:"search",placeholder:"Search for a user",value:this.state.search,onChange:this.handleInput})]}),Object(a.jsx)("i",{class:"fas fa-times-circle search-icon",onClick:this.closeSearchbar})]})}}]),s}(n.Component)),x=new(function(){function e(){Object(l.a)(this,e),this.auth=f.a.create({baseURL:"https://my-social-portfolio.herokuapp.com",withCredentials:!0})}return Object(p.a)(e,[{key:"signup",value:function(e,t,s,a,n){return this.auth.post("/auth/signup",{username:e,image:t,occupation:s,email:a,password:n}).then((function(e){return e.data})).catch((function(e){return console.log("SIGNUP DIDNT WORK")}))}},{key:"login",value:function(e,t){return this.auth.post("/auth/login",{email:e,password:t}).then((function(e){return e.data}))}},{key:"logout",value:function(){return this.auth.get("/auth/logout").then((function(e){return e.data}))}},{key:"me",value:function(){return this.auth.get("/auth/me").then((function(e){return e.data}))}}]),e}()),v=o.a.createContext(),w=v.Consumer,y=v.Provider,k=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={isLoggedIn:!1,isLoading:!0,user:null},e.signup=function(t,s,a,n,o){x.signup(t,s,a,n,o).then((function(t){return e.setState({isLoggedIn:!0,user:t})})).catch((function(t){e.setState({isLoggedIn:!1,user:null})}))},e.login=function(t,s){x.login(t,s).then((function(t){return e.setState({isLoggedIn:!0,user:t})})).catch((function(t){e.setState({isLoggedIn:!1,user:null})}))},e.logout=function(){x.logout().then((function(){return e.setState({isLoggedIn:!1,user:null})})).catch((function(e){return console.log(e)}))},e}return Object(p.a)(s,[{key:"componentDidMount",value:function(){var e=this;x.me().then((function(t){return e.setState({isLoggedIn:!0,user:t,isLoading:!1})})).catch((function(t){return e.setState({isLoggedIn:!1,user:null,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoggedIn,s=e.isLoading,n=e.user,o=this.signup,i=this.login,c=this.logout;return s?Object(a.jsx)("p",{children:"Loading"}):Object(a.jsx)(y,{value:{isLoggedIn:t,isLoading:s,user:n,signup:o,login:i,logout:c},children:this.props.children})}}]),s}(o.a.Component),C=function(e){return function(t){Object(u.a)(n,t);var s=Object(h.a)(n);function n(){return Object(l.a)(this,n),s.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var t=this;return Object(a.jsx)(w,{children:function(s){var n=s.isLoggedIn,o=s.isLoading,i=s.user,c=s.signup,r=s.login,l=s.logout;return Object(a.jsx)(e,Object(j.a)(Object(j.a)({},t.props),{},{isLoggedIn:n,isLoading:o,user:i,signup:c,login:r,logout:l}))}})}}]),n}(o.a.Component)},N=(s(90),C(function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={newUnreadMessages:0},e.componentDidMount=function(){f.a.get("".concat("https://my-social-portfolio.herokuapp.com","/api/user"),{withCredentials:!0}).then((function(t){t.data.chats.forEach((function(t){f.a.get("".concat("https://my-social-portfolio.herokuapp.com","/api/chat/").concat(t._id)).then((function(t){console.log(t.data.messages);var s=t.data.messages.filter((function(t){return!t.seen&&t.sentBy!==e.props.user._id}));e.setState({newUnreadMessages:e.state.newUnreadMessages+s.length})})).catch((function(e){return console.log(e)}))}))})).catch((function(e){return console.log(e)}))},e}return Object(p.a)(s,[{key:"render",value:function(){return Object(a.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(a.jsxs)("div",{className:"container-fluid",children:[Object(a.jsx)(r.b,{className:"navbar-brand",to:"/",children:"MyPortfolio"}),Object(a.jsxs)("div",{id:"chat-notification-icon",children:[0===this.state.newUnreadMessages?null:Object(a.jsx)("p",{className:"notification-num",children:this.state.newUnreadMessages}),this.props.isLoggedIn?Object(a.jsx)(r.b,{to:"/chat",children:Object(a.jsx)("i",{class:"fas fa-comment-dots"})}):null]}),Object(a.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(a.jsx)("span",{className:"navbar-toggler-icon"})}),Object(a.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(a.jsxs)("ul",{className:"navbar-nav",children:[Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(r.b,{to:"/home",className:"nav-link","aria-current":"page",children:"Home"})}),this.props.isLoggedIn?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(r.b,{to:"/chat",className:"nav-link",children:"Chat"})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(r.b,{to:"/myprofile",className:"nav-link",children:"My Profile"})}),Object(a.jsx)("li",{className:"nav-item nav-link logout-btn",onClick:this.props.logout,children:"Logout"})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(r.b,{to:"/signup",className:"nav-link",children:"Signup"})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(r.b,{to:"/login",className:"nav-link",children:"Login"})})]})]})})]})})}}]),s}(n.Component))),S=(s(95),C(function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(p.a)(s,[{key:"render",value:function(){return Object(a.jsxs)("div",{children:[this.props.user&&this.props.userOnCard._id===this.props.user._id?Object(a.jsx)(r.b,{to:"/myprofile",className:"link",children:Object(a.jsxs)("div",{className:"user-card",children:[Object(a.jsx)("img",{src:this.props.userOnCard.image}),Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{className:"name-info",children:this.props.userOnCard.username}),Object(a.jsx)("p",{className:"occupation-info",children:this.props.userOnCard.occupation})]})]})}):Object(a.jsx)(r.b,{to:"/user/".concat(this.props.userOnCard._id),className:"link",children:Object(a.jsxs)("div",{className:"user-card",children:[Object(a.jsx)("img",{src:this.props.userOnCard.image}),Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{className:"name-info",children:this.props.userOnCard.username}),Object(a.jsx)("p",{className:"occupation-info",children:this.props.userOnCard.occupation})]})]})})," "]})}}]),s}(n.Component))),U=s.p+"static/media/windows.7b7cd500.jpg",I=s.p+"static/media/ramiro-mendes-CjS3QsRuxnE-unsplash.2759f5ef.jpg",L=(s(96),function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(p.a)(s,[{key:"render",value:function(){return Object(a.jsxs)("div",{className:"footer",children:[Object(a.jsx)("i",{className:"fab fa-instagram"}),Object(a.jsx)("i",{className:"far fa-envelope"}),Object(a.jsx)("i",{className:"fab fa-facebook"}),Object(a.jsx)("i",{className:"fab fa-twitter"})]})}}]),s}(n.Component)),_=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={allUsers:[],filteredUsers:[],showErrorMessage:!1,hidePageContent:!1},e.filterUsers=function(t){var s=e.state.allUsers.filter((function(e){var s=e.username.toLowerCase(),a=t.toLowerCase();return s.includes(a)}));e.setState({filteredUsers:s,showErrorMessage:!1,hidePageContent:!0}),0===s.length&&e.setState({showErrorMessage:!0,hidePageContent:!0}),""===t&&e.setState({filteredUsers:[],showErrorMessage:!1,hidePageContent:!1})},e.componentDidMount=function(){f.a.get("".concat("https://my-social-portfolio.herokuapp.com","/api/users")).then((function(t){e.setState({allUsers:t.data})})).catch((function(e){return console.log(e)}))},e}return Object(p.a)(s,[{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)(N,{}),Object(a.jsxs)("div",{id:"home-page-content",children:[Object(a.jsx)(O,{filterUsers:this.filterUsers}),this.state.showErrorMessage?Object(a.jsxs)("p",{id:"search-error",children:[Object(a.jsx)("i",{class:"fas fa-search"}),"sorry we didnt find any users under that name"]}):null,this.state.filteredUsers.map((function(e){return Object(a.jsx)("div",{children:Object(a.jsx)(S,{userOnCard:e})},e._id)})),this.state.hidePageContent?null:Object(a.jsxs)("div",{id:"homepage",children:[Object(a.jsx)("p",{id:"first-p",children:"As young developers the projects we've built are what count most on the job market. Show employers what you have developed to increase your chances in getting a job."}),Object(a.jsx)("img",{src:U,id:"laptop-image"}),Object(a.jsx)("h3",{children:"Companies"}),Object(a.jsx)("p",{children:"If you are a company, you can start searching for a user by name and check out their profile. If you want to contact a user you can create an account and use the chat. Otherwise you can find the user's email address on the top of his profile page."}),Object(a.jsx)("img",{src:I,id:"laptop-image"}),Object(a.jsx)("h3",{children:"Developers"}),Object(a.jsx)("p",{children:"If you are a developer, you need to create an account with us to build your profile and share your projects."})]})]}),Object(a.jsx)(L,{})]})}}]),s}(o.a.Component),P=C(function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={username:"",image:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRI7M4Z0v1HP2Z9tZmfQaZFCuspezuoxter_A&usqp=CAU",occupation:"",email:"",password:"",showLoadingMessage:!1},e.handleFormSubmit=function(t){t.preventDefault();var s=e.state,a=s.username,n=s.image,o=s.occupation,i=s.email,c=s.password;e.props.signup(a,n,o,i,c)},e.handleChange=function(t){var s=t.target,a=s.name,n=s.value;e.setState(Object(g.a)({},a,n))},e.handleFileUpload=function(t){e.setState({showLoadingMessage:!0}),console.log("The file to be uploaded is: ",t.target.files);var s=t.target.files[0],a=new FormData;a.append("image",s),f.a.post("".concat("https://my-social-portfolio.herokuapp.com","/auth/upload"),a,{withCredentials:!0}).then((function(t){console.log("response is: ",t),e.setState({image:t.data.secure_url,showLoadingMessage:!1})})).catch((function(e){console.log("Error while uploading the file: ",e)}))},e}return Object(p.a)(s,[{key:"render",value:function(){var e=this.state,t=e.username,s=e.occupation,n=e.email,o=e.password;return Object(a.jsxs)("div",{children:[Object(a.jsx)(N,{}),Object(a.jsxs)("div",{id:"signup-page",children:[Object(a.jsx)("h1",{className:"signup-heading",children:"Create an account to use all our features"}),Object(a.jsxs)("form",{onSubmit:this.handleFormSubmit,className:"project-form",children:[Object(a.jsx)("input",{type:"text",name:"username",value:t,onChange:this.handleChange,maxlength:"20",className:"add-project-input",placeholder:"full name",required:!0}),Object(a.jsxs)("div",{id:"signup-image-upload",children:[this.state.showLoadingMessage?Object(a.jsx)("p",{id:"loading-message-signup",children:"loading ..."}):Object(a.jsx)("input",{name:"image",type:"file",onChange:this.handleFileUpload}),Object(a.jsx)("span",{children:Object(a.jsx)("img",{src:this.state.image&&this.state.image,alt:""})})]}),Object(a.jsx)("input",{type:"text",name:"occupation",value:s,onChange:this.handleChange,className:"add-project-input",maxlength:"25",placeholder:"occupation",required:!0}),Object(a.jsx)("input",{type:"email",name:"email",value:n,onChange:this.handleChange,className:"add-project-input",placeholder:"email",required:!0}),Object(a.jsx)("input",{type:"password",name:"password",value:o,onChange:this.handleChange,className:"add-project-input",placeholder:"password",required:!0}),Object(a.jsx)("input",{type:"submit",value:"Signup",className:"add-project-input",id:"signup-button"})]})]}),Object(a.jsx)(L,{})]})}}]),s}(n.Component)),F=C(function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={email:"",password:""},e.handleFormSubmit=function(t){t.preventDefault();var s=e.state,a=s.email,n=s.password;e.props.login(a,n)},e.handleChange=function(t){var s=t.target,a=s.name,n=s.value;e.setState(Object(g.a)({},a,n))},e}return Object(p.a)(s,[{key:"render",value:function(){var e=this.state,t=e.email,s=e.password;return Object(a.jsxs)("div",{children:[Object(a.jsx)(N,{}),Object(a.jsxs)("div",{id:"login-page",children:[Object(a.jsx)("h1",{className:"signup-heading",children:"Login"}),Object(a.jsxs)("form",{onSubmit:this.handleFormSubmit,className:"project-form",children:[Object(a.jsx)("input",{type:"email",name:"email",value:t,onChange:this.handleChange,className:"add-project-input",placeholder:"email",required:!0}),Object(a.jsx)("input",{type:"password",name:"password",value:s,onChange:this.handleChange,className:"add-project-input",placeholder:"password",required:!0}),Object(a.jsx)("input",{type:"submit",value:"Login",className:"add-project-input",id:"signup-button"})]})]}),Object(a.jsx)(L,{})]})}}]),s}(n.Component)),M=(s(97),C(function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={title:"",image:"",about:"",description:"",technologies:"",deployedLink:"",githubLink:"",showLoadingMessage:!1},e.handleInput=function(t){var s=t.target,a=s.name,n=s.value;s.type;e.setState(Object(g.a)({},a,n))},e.handleSubmit=function(t){t.preventDefault();var s=e.state,a=s.title,n=s.image,o=s.about,i=s.description,c=s.technologies,r=s.deployedLink,l=s.githubLink,p=e.props.user._id;f.a.post("".concat("https://my-social-portfolio.herokuapp.com","/api/projects"),{title:a,image:n,about:o,description:i,technologies:c,deployedLink:r,githubLink:l,userId:p},{withCredentials:!0}).then((function(){e.props.displayProjects(),e.props.toggleForm()})).catch((function(e){return console.log(e)})),e.setState({title:"",image:"",about:"",description:"",technologies:"",deployedLink:"",githubLink:""})},e.handleFileUpload=function(t){e.setState({showLoadingMessage:!0}),console.log("The file to be uploaded is: ",t.target.files);var s=t.target.files[0],a=new FormData;a.append("image",s),f.a.post("".concat("https://my-social-portfolio.herokuapp.com","/api/upload"),a,{withCredentials:!0}).then((function(t){console.log("response is: ",t),e.setState({image:t.data.secure_url,showLoadingMessage:!1})})).catch((function(e){console.log("Error while uploading the file: ",e)}))},e}return Object(p.a)(s,[{key:"render",value:function(){return Object(a.jsxs)("form",{onSubmit:this.handleSubmit,className:"project-form",children:[Object(a.jsx)("input",{type:"text",name:"title",value:this.state.title,onChange:this.handleInput,placeholder:"name of your project",maxlength:"40",className:"add-project-input",required:!0}),Object(a.jsxs)("div",{id:"project-image-upload",className:"add-project-input",children:[Object(a.jsx)("input",{name:"image",type:"file",onChange:this.handleFileUpload,className:"add-project-input project-image-input"}),this.state.showLoadingMessage?Object(a.jsx)("p",{id:"loading-message-project",children:"loading"}):null,Object(a.jsx)("span",{children:Object(a.jsx)("img",{style:{width:"30px",height:"auto",borderRadius:"10px"},src:this.state.image&&this.state.image,alt:""})})]}),Object(a.jsx)("input",{type:"text",name:"about",value:this.state.about,onChange:this.handleInput,placeholder:"what kind of app / e.g 'e-commerce site'",maxlength:"30",className:"add-project-input",required:!0}),Object(a.jsx)("textarea",{type:"text",name:"description",value:this.state.description,onChange:this.handleInput,placeholder:"description of the project",maxlength:"300",className:"add-project-input",required:!0}),Object(a.jsx)("input",{type:"text",name:"technologies",value:this.state.technologies,onChange:this.handleInput,placeholder:"technolgies used",className:"add-project-input",maxlength:"150",required:!0}),Object(a.jsx)("input",{type:"text",name:"deployedLink",value:this.state.deployedLink,onChange:this.handleInput,placeholder:"link to the deployed website",className:"add-project-input",required:!0}),Object(a.jsx)("input",{type:"text",name:"githubLink",value:this.state.githubLink,onChange:this.handleInput,placeholder:"link to the github repository",className:"add-project-input",required:!0}),Object(a.jsx)("button",{type:"submit",children:"Share your project"})]})}}]),s}(n.Component))),E=(s(98),s(99),C(function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={title:e.props.project.title,image:e.props.project.image,about:e.props.project.about,description:e.props.project.description,technologies:e.props.project.technologies,deployedLink:e.props.project.deployedLink,githubLink:e.props.project.githubLink,showLoadingMessage:!1},e.handleInput=function(t){var s=t.target,a=s.name,n=s.value;s.type;console.log(n),e.setState(Object(g.a)({},a,n))},e.handleSubmit=function(t){t.preventDefault();var s=e.state,a=s.title,n=s.image,o=s.about,i=s.description,c=s.technologies,r=s.deployedLink,l=s.githubLink,p=e.props.user._id,u=e.props.project._id;f.a.put("".concat("https://my-social-portfolio.herokuapp.com","/api/projects/").concat(u),{title:a,image:n,about:o,description:i,technologies:c,deployedLink:r,githubLink:l,userId:p},{withCredentials:!0}).then((function(){e.props.toggleForm(),e.props.displayProjects()})).catch((function(e){return console.log(e)})),e.setState({title:"",image:"",about:"",description:"",technologies:"",deployedLink:"",githubLink:""})},e.handleFileUpload=function(t){e.setState({showLoadingMessage:!0}),console.log("The file to be uploaded is: ",t.target.files);var s=t.target.files[0],a=new FormData;a.append("image",s),f.a.post("".concat("https://my-social-portfolio.herokuapp.com","/api/upload"),a,{withCredentials:!0}).then((function(t){console.log("response is: ",t),e.setState({image:t.data.secure_url,showLoadingMessage:!1})})).catch((function(e){console.log("Error while uploading the file: ",e)}))},e}return Object(p.a)(s,[{key:"render",value:function(){return Object(a.jsxs)("form",{onSubmit:this.handleSubmit,className:"project-form",id:"edit-form",children:[Object(a.jsx)("input",{type:"text",name:"title",value:this.state.title,onChange:this.handleInput,className:"add-project-input",placeholder:"name of your project",maxlength:"40",required:!0}),Object(a.jsxs)("div",{id:"project-image-upload",className:"add-project-input",children:[Object(a.jsx)("input",{name:"image",type:"file",onChange:this.handleFileUpload,className:"add-project-input project-image-input"}),this.state.showLoadingMessage?Object(a.jsx)("p",{id:"loading-message-project",children:"loading"}):null,Object(a.jsx)("span",{children:Object(a.jsx)("img",{style:{width:"30px",height:"auto",borderRadius:"10px"},src:this.state.image,alt:""})})]}),Object(a.jsx)("input",{type:"text",name:"about",value:this.state.about,onChange:this.handleInput,placeholder:"what kind of app / e.g 'e-commerce site'",className:"add-project-input",maxlength:"30",required:!0}),Object(a.jsx)("textarea",{type:"text",name:"description",value:this.state.description,onChange:this.handleInput,className:"add-project-input",placeholder:"description of the project",maxlength:"300",required:!0}),Object(a.jsx)("input",{type:"text",name:"technologies",value:this.state.technologies,onChange:this.handleInput,className:"add-project-input",placeholder:"technolgies used",maxlength:"150",required:!0}),Object(a.jsx)("input",{type:"text",name:"deployedLink",value:this.state.deployedLink,onChange:this.handleInput,placeholder:"link to the deployed website",className:"add-project-input",required:!0}),Object(a.jsx)("input",{type:"text",name:"githubLink",value:this.state.githubLink,onChange:this.handleInput,placeholder:"link to the github repository",className:"add-project-input",required:!0}),Object(a.jsx)("button",{type:"submit",children:"Update changes"})]})}}]),s}(n.Component))),A=(s(100),s(36)),B=s.n(A),D=C(function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={writtenBy:{}},e.deleteComment=function(){f.a.post("".concat("https://my-social-portfolio.herokuapp.com","/api/comments/").concat(e.props.comment._id)).then((function(t){e.props.displayComments()})).catch((function(e){return console.log(e)}))},e.componentDidMount=function(){f.a.get("".concat("https://my-social-portfolio.herokuapp.com","/api/comments/").concat(e.props.comment._id)).then((function(t){e.setState({writtenBy:t.data.writtenBy})})).catch((function(e){return console.log(e)}))},e}return Object(p.a)(s,[{key:"render",value:function(){console.log(this.props.comment.created_at);var e=B()(this.props.comment.created_at).startOf("hour").fromNow();return Object(a.jsxs)("div",{className:"comment",children:[Object(a.jsxs)("div",{className:"comment-left",children:[Object(a.jsx)("img",{src:this.state.writtenBy.image}),Object(a.jsxs)("div",{className:"comment-center",children:[Object(a.jsx)("div",{children:this.props.comment.text}),Object(a.jsxs)("p",{children:["commented ",e]})]})]}),this.props.user&&this.state.writtenBy._id===this.props.user._id?Object(a.jsx)("p",{onClick:this.deleteComment,className:"delete-x",children:"x"}):null]})}}]),s}(n.Component)),T=(s(102),C(function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={text:""},e.handleSubmit=function(t){t.preventDefault();var s=e.state.text,a=e.props.user._id,n=e.props.project._id;f.a.post("".concat("https://my-social-portfolio.herokuapp.com","/api/comments"),{text:s,projectId:n,userId:a},{withCredentials:!0}).then((function(){e.props.displayComments()})).catch((function(e){return console.log(e)})),e.setState({text:""})},e.handleInput=function(t){var s=t.target,a=s.name,n=s.value;s.type;e.setState(Object(g.a)({},a,n))},e}return Object(p.a)(s,[{key:"render",value:function(){return Object(a.jsxs)("form",{onSubmit:this.handleSubmit,className:"comment-input",children:[Object(a.jsx)("input",{placeholder:"write a comment",type:"text",name:"text",value:this.state.text,onChange:this.handleInput,required:!0})," ",Object(a.jsx)("button",{children:"Post"})]})}}]),s}(n.Component))),q=(s(103),function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={},e}return Object(p.a)(s,[{key:"render",value:function(){return Object(a.jsxs)("div",{className:"likes-pop-up",children:[Object(a.jsx)("i",{class:"fas fa-times-circle search-icon",onClick:this.props.togglePopUp}),this.props.userArray.map((function(e){return Object(a.jsx)("div",{children:Object(a.jsx)(S,{userOnCard:e})},e._id)}))]})}}]),s}(n.Component)),R=C(function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={showFront:!0,showEditForm:!1,showCommentSection:!1,comments:[],likedBy:[],showLikesPopUp:!1,chatId:"",redirect:!1},e.createChat=function(){if(e.props.user){var t=e.props.madeBy,s=e.props.user._id;if(e.props.madeBy.chats.some((function(t){return t.participants.includes(e.props.user._id)}))){console.log("chat already exists");var a=e.props.madeBy.chats.filter((function(t){return t.participants.includes(e.props.user._id)}));e.setState({chatId:a[0]._id,redirect:!0})}else f.a.post("".concat("https://my-social-portfolio.herokuapp.com","/api/chat/").concat(t._id),{currentUserId:s},{withCredentials:!0}).then((function(t){console.log("new chat created",t.data),e.setState({chatId:t.data,redirect:!0})})).catch((function(e){return console.log(e)}))}else alert("Please log in to contact "+e.props.madeBy.username)},e.toggleCard=function(){e.setState({showFront:!e.state.showFront})},e.deleteProject=function(){f.a.post("".concat("https://my-social-portfolio.herokuapp.com","/api/projects/").concat(e.props.project._id)).then((function(){return e.props.displayProjects()})).catch((function(e){return console.log(e)}))},e.toggleEditForm=function(){e.setState({showEditForm:!e.state.showEditForm})},e.toggleComments=function(){e.setState({showCommentSection:!e.state.showCommentSection})},e.displayComments=function(){f.a.get("".concat("https://my-social-portfolio.herokuapp.com","/api/projects/").concat(e.props.project._id)).then((function(t){e.setState({comments:t.data.comments,likedBy:t.data.likedBy})})).catch((function(e){return console.log(e)}))},e.showAlert=function(){alert("you must log in to write a comment")},e.toggleLikesPopUp=function(){e.setState({showLikesPopUp:!e.state.showLikesPopUp})},e.like=function(){var t=e.props.user._id;f.a.post("".concat("https://my-social-portfolio.herokuapp.com","/api/projects/like/").concat(e.props.project._id),{userId:t},{withCredentials:!0}).then((function(t){e.displayComments(),e.props.updateLikes()})).catch((function(e){return console.log(e)}))},e.dislike=function(){var t=e.props.user._id;f.a.post("".concat("https://my-social-portfolio.herokuapp.com","/api/projects/dislike/").concat(e.props.project._id),{userId:t},{withCredentials:!0}).then((function(t){e.displayComments(),e.props.updateLikes()})).catch((function(e){return console.log(e)}))},e.componentDidMount=function(){e.displayComments()},e}return Object(p.a)(s,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:"project-card-container",children:[this.state.showLikesPopUp?Object(a.jsx)("div",{children:Object(a.jsx)(q,{togglePopUp:this.toggleLikesPopUp,userArray:this.state.likedBy})}):null,this.state.showFront?Object(a.jsxs)("div",{className:"project-card front",children:[Object(a.jsx)("img",{src:this.props.project.image,onClick:this.toggleCard}),Object(a.jsx)("div",{className:"bottom-card",children:Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"card-icons",children:[Object(a.jsxs)("div",{className:"like-icons",children:[this.props.enableLikes&&this.state.likedBy.every((function(t){return t._id!==e.props.user._id}))?Object(a.jsx)("i",{className:"far fa-heart",onClick:this.like}):this.props.enableLikes&&this.state.likedBy.some((function(t){return t._id===e.props.user._id}))?Object(a.jsx)("i",{className:"fas fa-heart liked-heart",onClick:this.dislike}):null,Object(a.jsx)("i",{className:"far fa-comment",onClick:this.toggleComments}),this.props.showEditOptions?null:Object(a.jsx)("i",{class:"far fa-paper-plane",onClick:this.createChat})]}),this.state.redirect?Object(a.jsx)(d.a,{to:"/conversation/".concat(this.state.chatId)}):null,Object(a.jsx)("div",{className:"edit-icons",children:this.props.showEditOptions?Object(a.jsxs)("div",{children:[Object(a.jsx)("i",{className:"fas fa-pen",onClick:this.toggleEditForm}),Object(a.jsx)("i",{className:"fas fa-trash",onClick:this.deleteProject})]}):null})]}),Object(a.jsxs)("div",{className:"project-name",children:[Object(a.jsx)("p",{id:"colored-p",children:this.props.project.title}),Object(a.jsx)("p",{id:"small-p",children:this.props.project.about})]}),Object(a.jsx)("div",{className:"likes-comments",children:Object(a.jsxs)("div",{className:"like-comment-calculator",children:[this.state.comments.length>0?Object(a.jsxs)("p",{onClick:this.toggleComments,className:"comment-line",children:[this.state.comments.length," comments"]}):null,this.state.likedBy.length>0?Object(a.jsxs)("div",{className:"likedBy-line",onClick:this.toggleLikesPopUp,children:[this.state.likedBy.map((function(e,t){if(t<=2)return Object(a.jsx)("div",{id:"mini-img-container",children:Object(a.jsx)("img",{src:e.image,id:"mini-img"})},e._id)})),Object(a.jsxs)("div",{className:"likedBy-line-written",children:[Object(a.jsxs)("p",{children:["liked by ".concat(this.state.likedBy[0].username," ")," "]}),this.state.likedBy.length>=2?Object(a.jsxs)("p",{children:[" and ".concat(this.state.likedBy.length-1," others")," "]}):null]})]}):null]})})]})})]}):Object(a.jsxs)("div",{className:"project-card back",onClick:this.toggleCard,children:[Object(a.jsxs)("div",{className:"link-icons",children:[Object(a.jsx)("a",{href:this.props.project.githubLink,target:"_blank",children:Object(a.jsx)("i",{className:"fab fa-github"})}),Object(a.jsx)("a",{href:this.props.project.deployedLink,target:"_blank",children:Object(a.jsx)("i",{className:"fas fa-globe"})})]}),Object(a.jsxs)("div",{className:"description",children:[Object(a.jsxs)("p",{children:[this.props.project.description," "]}),Object(a.jsxs)("p",{children:["technologies used: ",this.props.project.technologies," "]})]})]}),this.state.showEditForm?Object(a.jsx)(E,{project:this.props.project,toggleForm:this.toggleEditForm,displayProjects:this.props.displayProjects}):null,this.state.showCommentSection?Object(a.jsxs)("div",{className:"comment-section",children:[this.props.showCommentInput?Object(a.jsx)(T,{project:this.props.project,displayComments:this.displayComments,toggleComments:this.toggleComments}):Object(a.jsxs)("form",{className:"comment-input",children:[Object(a.jsx)("input",{placeholder:"log in to write a comment"}),Object(a.jsx)("button",{onClick:this.showAlert,children:"Post"})]}),Object(a.jsx)("div",{children:this.state.comments.map((function(t){return Object(a.jsx)("div",{children:Object(a.jsx)(D,{comment:t,displayComments:e.displayComments})},t._id)})).reverse()})]}):null]})}}]),s}(n.Component)),G=C(function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={username:e.props.userToEdit.username,occupation:e.props.userToEdit.occupation,image:e.props.userToEdit.image},e.handleInput=function(t){var s=t.target,a=s.name,n=s.value;s.type;console.log(n),e.setState(Object(g.a)({},a,n))},e.handleSubmit=function(t){t.preventDefault();var s=e.state,a=s.username,n=s.occupation,o=s.image,i=e.props.user._id;f.a.put("".concat("https://my-social-portfolio.herokuapp.com","/api/user/").concat(i),{username:a,occupation:n,image:o},{withCredentials:!0}).then((function(){e.props.editUserName(),e.props.displayProjects()})).catch((function(e){return console.log(e)})),e.setState({username:"",occupation:""})},e}return Object(p.a)(s,[{key:"render",value:function(){return Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(a.jsx)("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleInput,placeholder:"username",className:"edit-input",maxlength:"20",required:!0}),Object(a.jsx)("button",{type:"submit",className:"edit-input-button",children:Object(a.jsx)("i",{class:"fas fa-pen",type:"submit"})})]})}}]),s}(n.Component)),Y=C(function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={username:e.props.userToEdit.username,occupation:e.props.userToEdit.occupation,image:e.props.userToEdit.image},e.handleInput=function(t){var s=t.target,a=s.name,n=s.value;s.type;console.log(n),e.setState(Object(g.a)({},a,n))},e.handleSubmit=function(t){t.preventDefault();var s=e.state,a=s.username,n=s.occupation,o=s.image,i=e.props.user._id;f.a.put("".concat("https://my-social-portfolio.herokuapp.com","/api/user/").concat(i),{username:a,occupation:n,image:o},{withCredentials:!0}).then((function(){e.props.editOccupation(),e.props.displayProjects()})).catch((function(e){return console.log(e)})),e.setState({username:"",occupation:""})},e}return Object(p.a)(s,[{key:"render",value:function(){return Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(a.jsx)("input",{type:"text",name:"occupation",className:"edit-input",value:this.state.occupation,onChange:this.handleInput,placeholder:"occupation",maxlength:"25",required:!0}),Object(a.jsx)("button",{type:"submit",className:"edit-input-button",children:Object(a.jsx)("i",{class:"fas fa-pen",type:"submit"})})]})}}]),s}(n.Component)),H=C(function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={username:e.props.userToEdit.username,occupation:e.props.userToEdit.occupation,image:e.props.userToEdit.image,showLoadingMessage:!1},e.handleInput=function(t){var s=t.target,a=s.name,n=s.value;s.type;console.log(n),e.setState(Object(g.a)({},a,n))},e.handleSubmit=function(t){t.preventDefault();var s=e.state,a=s.username,n=s.occupation,o=s.image,i=e.props.user._id;f.a.put("".concat("https://my-social-portfolio.herokuapp.com","/api/user/").concat(i),{username:a,occupation:n,image:o},{withCredentials:!0}).then((function(){e.props.editUserImage(),e.props.displayProjects()})).catch((function(e){return console.log(e)})),e.setState({username:"",occupation:""})},e.handleFileUpload=function(t){e.setState({showLoadingMessage:!0}),console.log("The file to be uploaded is: ",t.target.files);var s=t.target.files[0],a=new FormData;a.append("image",s),f.a.post("".concat("https://my-social-portfolio.herokuapp.com","/api/upload"),a,{withCredentials:!0}).then((function(t){console.log("response is: ",t),e.setState({image:t.data.secure_url,showLoadingMessage:!1})})).catch((function(e){console.log("Error while uploading the file: ",e)}))},e}return Object(p.a)(s,[{key:"render",value:function(){return Object(a.jsxs)("form",{onSubmit:this.handleSubmit,className:"image-upload-form",children:[Object(a.jsx)("span",{children:Object(a.jsx)("img",{className:"user-image",src:this.state.image&&this.state.image,alt:"uploading"})}),this.state.showLoadingMessage?Object(a.jsx)("div",{children:Object(a.jsx)("p",{id:"loading-message",children:"loading"})}):Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{className:"image-upload",name:"image",type:"file",onChange:this.handleFileUpload}),Object(a.jsx)("button",{type:"submit",children:Object(a.jsx)("i",{class:"fas fa-upload",type:"submit"})})]})]})}}]),s}(n.Component)),Z=C(function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={user:{},username:"",image:"",portfolio:[],showForm:!1,showFollowersPopUp:!1,showFollowingPopUp:!1,showUserNameInput:!1,showOccupationInput:!1,showImageUpload:!1,followers:[],following:[],unreadMessages:0},e.toggleForm=function(){e.setState({showForm:!e.state.showForm})},e.displayProjects=function(){f.a.get("".concat("https://my-social-portfolio.herokuapp.com","/api/user"),{withCredentials:!0}).then((function(t){console.log("rendered"),e.setState({user:t.data,username:t.data.username,occupation:t.data.occupation,portfolio:t.data.portfolio,followers:t.data.followers,following:t.data.following,image:t.data.image}),t.data.chats.forEach((function(t){f.a.get("".concat("https://my-social-portfolio.herokuapp.com","/api/chat/").concat(t._id)).then((function(t){var s=t.data.messages.filter((function(t){return!1===t.seen&&t.sentBy!==e.props.user._id}));e.setState({unreadMessages:e.state.unreadMessages+s.length}),console.log(s.length)})).catch((function(e){console.log(e)}))}))})).catch((function(e){return console.log(e)}))},e.toggleFollowersPopup=function(){e.setState({showFollowersPopUp:!e.state.showFollowersPopUp})},e.toggleFollowingPopup=function(){e.setState({showFollowingPopUp:!e.state.showFollowingPopUp})},e.editUserImage=function(){e.setState({showImageUpload:!e.state.showImageUpload})},e.editUsername=function(){e.setState({showUserNameInput:!e.state.showUserNameInput})},e.editOccupation=function(){e.setState({showOccupationInput:!e.state.showOccupationInput})},e.componentDidMount=function(){e.displayProjects()},e}return Object(p.a)(s,[{key:"render",value:function(){var e=this;return console.log(this.state.following),Object(a.jsxs)("div",{className:"user-profile",children:[Object(a.jsx)(N,{}),Object(a.jsxs)("div",{className:"page-content",children:[this.props.user?Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"user-details private-user-details",children:[this.state.showImageUpload?Object(a.jsx)("div",{children:Object(a.jsx)(H,{editUserImage:this.editUserImage,displayProjects:this.displayProjects,userToEdit:this.state.user})}):Object(a.jsxs)("div",{className:"edit-user-image",children:[Object(a.jsx)("img",{src:this.state.image,className:"user-image"}),Object(a.jsx)("i",{class:"fas fa-plus-circle",onClick:this.editUserImage})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{children:[this.state.showUserNameInput?Object(a.jsx)(G,{editUserName:this.editUsername,displayProjects:this.displayProjects,userToEdit:this.state.user}):Object(a.jsxs)("div",{className:"edit-user",children:[Object(a.jsx)("h2",{children:this.state.username}),Object(a.jsx)("i",{class:"fas fa-pen",onClick:this.editUsername})]}),this.state.showOccupationInput?Object(a.jsx)(Y,{editOccupation:this.editOccupation,displayProjects:this.displayProjects,userToEdit:this.state.user}):Object(a.jsxs)("div",{className:"edit-user",children:[Object(a.jsx)("h4",{children:this.state.occupation}),Object(a.jsx)("i",{class:"fas fa-pen",onClick:this.editOccupation})]})]}),Object(a.jsxs)("div",{className:"followers-following",children:[Object(a.jsxs)("p",{onClick:this.toggleFollowersPopup,children:[this.state.followers.length," followers"]}),this.state.showFollowersPopUp&&this.state.followers.length>0?Object(a.jsx)(q,{userArray:this.state.followers,togglePopUp:this.toggleFollowersPopup}):null,Object(a.jsxs)("p",{onClick:this.toggleFollowingPopup,children:[this.state.following.length," following"]}),this.state.showFollowingPopUp&&this.state.following.length>0?Object(a.jsx)(q,{userArray:this.state.following,togglePopUp:this.toggleFollowingPopup}):null]})]})]}),Object(a.jsxs)("p",{id:"welcome-message",children:["Welcome back ",this.state.username,"!"]}),0===this.state.unreadMessages?Object(a.jsx)(r.b,{to:"/chat",className:"link",children:Object(a.jsxs)("p",{id:"no-new-message",children:[Object(a.jsx)("i",{class:"fas fa-comment-dots",id:"black-comment-dots"}),"You have no new messages."]})}):1===this.state.unreadMessages?Object(a.jsx)(r.b,{to:"/chat",className:"link",children:Object(a.jsxs)("p",{id:"notification-message",children:[Object(a.jsx)("i",{class:"fas fa-comment-dots",id:"black-comment-dots"}),"You have ",this.state.unreadMessages," new message."]})}):Object(a.jsx)(r.b,{to:"/chat",className:"link",children:Object(a.jsxs)("p",{id:"notification-message",children:[Object(a.jsx)("i",{class:"fas fa-comment-dots",id:"black-comment-dots"}),"You have ",this.state.unreadMessages," new messages."]})})]}):null,Object(a.jsx)("div",{id:"add-project",children:Object(a.jsx)("button",{onClick:this.toggleForm,children:"Add a new project"})}),this.state.showForm?Object(a.jsx)(M,{displayProjects:this.displayProjects,toggleForm:this.toggleForm}):null,Object(a.jsx)("div",{id:"projects-scroll-bar",children:this.state.portfolio.map((function(t){return Object(a.jsx)(R,{project:t,displayProjects:e.displayProjects,showEditOptions:!0,showCommentInput:!0,enableLikes:!0,updateLikes:e.displayProjects})})).reverse()})]}),Object(a.jsx)(L,{})]})}}]),s}(n.Component)),W=C(function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={user:{},currentUser:{},followers:[],userIsFollowing:[],following:!1,portfolio:[],loggedInUser:!1,showFollowersPopUp:!1,showFollowingPopUp:!1,showEmail:!1,redirect:!1,chatId:"",displayLogInAlert:!0},e.componentDidMount=function(){var t=e.props.match.params.id;f.a.get("".concat("https://my-social-portfolio.herokuapp.com","/api/user/").concat(t)).then((function(t){e.setState({user:t.data,portfolio:t.data.portfolio,followers:t.data.followers,userIsFollowing:t.data.following}),e.props.user&&(e.setState({loggedInUser:!0}),t.data.followers.some((function(t){return t._id===e.props.user._id}))&&(console.log("YES IT INCLUDES"),e.setState({following:!0})))})).catch((function(e){return console.log(e)}))},e.toggleFollowersPopup=function(){e.setState({showFollowersPopUp:!e.state.showFollowersPopUp})},e.toggleFollowingPopup=function(){e.setState({showFollowingPopUp:!e.state.showFollowingPopUp})},e.followUser=function(){var t=e.props.match.params.id,s=e.props.user._id;f.a.post("".concat("https://my-social-portfolio.herokuapp.com","/api/user/follow/").concat(t),{currentUserId:s},{withCredentials:!0}).then((function(t){console.log("followed succesfully"),e.setState({following:!0}),e.componentDidMount()})).catch((function(e){return console.log(e)}))},e.unfollowUser=function(){var t=e.props.match.params.id,s=e.props.user._id;f.a.post("".concat("https://my-social-portfolio.herokuapp.com","/api/user/unfollow/").concat(t),{currentUserId:s},{withCredentials:!0}).then((function(t){console.log("unfollowed succesfully");var a=e.state.followers.filter((function(e){return e._id!==s}));e.setState({following:!1,followers:a})})).catch((function(e){return console.log(e)}))},e.displayEmail=function(){e.setState({showEmail:!e.state.showEmail})},e.createChat=function(){if(e.props.user){var t=e.props.match.params.id,s=e.props.user._id;if(e.state.user.chats.some((function(t){return t.participants.includes(e.props.user._id)}))){console.log("chat already exists");var a=e.state.user.chats.filter((function(t){return t.participants.includes(e.props.user._id)}));e.setState({chatId:a[0]._id,redirect:!0})}else f.a.post("".concat("https://my-social-portfolio.herokuapp.com","/api/chat/").concat(t),{currentUserId:s},{withCredentials:!0}).then((function(t){console.log("new chat created",t.data),e.setState({chatId:t.data,redirect:!0})})).catch((function(e){return console.log(e)}))}else alert("Please log in to contact "+e.state.user.username)},e.followNotLoggedIn=function(){alert("Please log in to follow "+e.state.user.username)},e}return Object(p.a)(s,[{key:"render",value:function(){var e=this;return console.log(this.state.userIsFollowing),Object(a.jsxs)("div",{className:"user-profile",children:[Object(a.jsx)(N,{}),Object(a.jsxs)("div",{className:"page-content",children:[Object(a.jsxs)("div",{className:"user-details",children:[Object(a.jsxs)("div",{className:"top-left",children:[Object(a.jsx)("img",{src:this.state.user.image,className:"user-image"}),Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:this.state.user.username}),Object(a.jsx)("h4",{children:this.state.user.occupation}),Object(a.jsxs)("div",{className:"followers-following",children:[Object(a.jsxs)("p",{onClick:this.toggleFollowersPopup,children:[this.state.followers.length," followers"]}),this.state.showFollowersPopUp&&this.state.followers.length>0?Object(a.jsx)(q,{userArray:this.state.followers,togglePopUp:this.toggleFollowersPopup}):null,Object(a.jsxs)("p",{onClick:this.toggleFollowingPopup,children:[this.state.userIsFollowing.length," following"]}),this.state.showFollowingPopUp&&this.state.userIsFollowing.length>0?Object(a.jsx)(q,{userArray:this.state.userIsFollowing,togglePopUp:this.toggleFollowingPopup}):null]})]})]}),Object(a.jsxs)("div",{className:"user-details-bottom",children:[this.props.user&&this.state.following?Object(a.jsxs)("button",{onClick:this.unfollowUser,className:"follow-button",children:[" ","- Unfollow"]}):null,this.props.user?null:Object(a.jsxs)("button",{onClick:this.followNotLoggedIn,className:"follow-button",children:[" ","+ Follow"]}),this.props.user&&!this.state.following?Object(a.jsxs)("button",{onClick:this.followUser,className:"follow-button",children:[" ","+ Follow"]}):null,Object(a.jsx)("button",{className:"follow-button",onClick:this.createChat,children:"Message"}),this.state.redirect?Object(a.jsx)(d.a,{to:"/conversation/".concat(this.state.chatId)}):null,Object(a.jsx)("button",{className:"follow-button",onClick:this.displayEmail,children:"Email"}),this.state.showEmail?Object(a.jsx)("p",{className:"email-show",children:this.state.user.email}):null]})]}),Object(a.jsx)("div",{id:"projects-scroll-bar",children:this.state.portfolio.length>0?this.state.user.portfolio.map((function(t){return Object(a.jsx)("div",{children:Object(a.jsx)(R,{madeBy:e.state.user,project:t,showEditOptions:!1,showCommentInput:e.state.loggedInUser,enableLikes:e.state.loggedInUser,updateLikes:e.componentDidMount})},t._id)})).reverse():null})]}),Object(a.jsx)(L,{})]})}}]),s}(o.a.Component));var J=function(){return Object(a.jsxs)("div",{id:"landing-page",children:[Object(a.jsx)("p",{children:"Connect with other developers and share your portfolio with companies - all in one place."}),Object(a.jsxs)("div",{children:[Object(a.jsx)(r.b,{to:"/signup",children:Object(a.jsx)("button",{className:"landing-btn",children:"Get started"})}),Object(a.jsx)(r.b,{to:"/home",children:Object(a.jsx)("button",{className:"landing-btn",children:"Explore"})})]})]})},Q=(s(104),s(115),C(function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={chat:{},otherUser:[],lastMessage:{},lastMessageLength:0,hasUnreadMessages:!1,unreadMessages:[]},e.componentDidMount=function(){f.a.get("".concat("https://my-social-portfolio.herokuapp.com","/api/chat/").concat(e.props.chat._id)).then((function(t){e.setState({chat:t.data});var s=t.data.participants.filter((function(t){return t._id!==e.props.user._id}));if(console.log(t.data.messages[t.data.messages.length-1].text.length),e.setState({otherUser:s[0],lastMessage:t.data.messages[t.data.messages.length-1],lastMessageLength:t.data.messages[t.data.messages.length-1].text.length}),t.data.messages.some((function(t){return!t.seen&&t.sentBy!==e.props.user._id}))){var a=t.data.messages.filter((function(t){return!t.seen&&t.sentBy!==e.props.user._id}));e.setState({hasUnreadMessages:!0,unreadMessages:a})}})).catch((function(e){return console.log(e)}))},e.readChat=function(){var t=e.state.chat.messages.filter((function(t){return t.sentBy!==e.props.user._id}));console.log("OTHER MESSAGES",t),t.forEach((function(t){f.a.put("".concat("https://my-social-portfolio.herokuapp.com","/api/message/read/").concat(t._id)).then((function(){console.log("message was read"),e.setState({hasUnreadMessages:!1})})).catch((function(e){console.log(e)}))}))},e}return Object(p.a)(s,[{key:"render",value:function(){return console.log(this.state.messages),Object(a.jsx)("div",{children:Object(a.jsx)(r.b,{to:"/conversation/".concat(this.state.chat._id),className:"link",children:Object(a.jsxs)("div",{className:"user-in-chat",onClick:this.readChat,children:[Object(a.jsxs)("div",{id:"user-chat-info-card",children:[Object(a.jsx)("img",{src:this.state.otherUser.image}),Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{id:"chat-card-username",children:this.state.otherUser.username}),Object(a.jsxs)("div",{id:"chat-preview-line",children:[Object(a.jsx)("p",{id:"chat-preview",children:this.state.lastMessage.text}),this.state.lastMessageLength>30?Object(a.jsx)("span",{id:"dots",children:"..."}):null]})]})]}),this.state.hasUnreadMessages?Object(a.jsx)("div",{className:"new-message-alert",children:Object(a.jsx)("p",{children:this.state.unreadMessages.length})}):null]})})})}}]),s}(n.Component))),z=C(function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={chats:[],sortedChats:[],online:[],openChat:{}},e.componentDidMount=function(){e.getAllChats()},e.getAllChats=function(){e.props.user._id;f.a.get("".concat("https://my-social-portfolio.herokuapp.com","/api/user"),{withCredentials:!0}).then((function(t){var s=t.data.chats.map((function(e){return e.updated_at=Date.parse(e.updated_at),e}));console.log(s);var a=s.sort((function(e,t){return t.updated_at-e.updated_at}));console.log("CHATS:",t.data.chats),e.setState({chats:t.data.chats,sortedChats:a})})).catch((function(e){return console.log(e)}))},e.readChat=function(t){console.log("chat with id ".concat(t._id," is now open")),console.log(t.messages),e.setState({openChat:t})},e}return Object(p.a)(s,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{id:"chat-list",children:[Object(a.jsx)(N,{}),0===this.state.sortedChats.length?Object(a.jsxs)("p",{id:"empty-chat",children:["You don't have any chats yet."," ",Object(a.jsx)(r.b,{to:"/home",className:"link",children:"Search"})," ","for a user you want to connect with and start a conversation through their profile page."]}):Object(a.jsx)("div",{id:"chatlist-scroll-bar",children:this.state.sortedChats.map((function(t){return Object(a.jsx)("div",{onClick:function(){e.readChat(t)},children:Object(a.jsx)(Q,{chat:t})},t._id)}))})]})}}]),s}(n.Component)),K=s(66),V=s.n(K)()("https://my-social-portfolio.herokuapp.com"),X=C(function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={text:"",chat:{},messages:[],otherUser:{},typing:!1},e.startSocket=function(){V.emit("join",{room:e.state.chat._id,user:e.props.user._id},(function(e){e&&console.log(e)})),V.on("message",(function(t){console.log("socket.on was called"),e.getAllMessages()}))},e.handleInput=function(t){var s=t.target,a=s.name,n=s.value;s.type;e.setState(Object(g.a)({},a,n))},e.handleSubmit=function(t){t.preventDefault();e.state.text;var s=e.props.user._id;f.a.post("".concat("https://my-social-portfolio.herokuapp.com","/api/message"),{chat:e.state.chat._id,sentBy:s,text:e.state.text},{withCredentials:!0}).then((function(){e.getAllMessages(),V.emit("sendMessage",{room:e.state.chat._id,user:e.props.user._id},(function(e){e&&console.log(e)}))})).catch((function(e){return console.log(e)})),e.setState({text:""})},e.scrollToBottom=function(){e.el.scrollIntoView({behavior:"auto"})},e.componentDidMount=function(){e.mountComponent()},e.getAllMessages=function(){var t=e.props.match.params.id;f.a.get("".concat("https://my-social-portfolio.herokuapp.com","/api/chat/").concat(t)).then((function(t){var s=t.data.participants.filter((function(t){return t._id!==e.props.user._id}));e.setState({chat:t.data,messages:t.data.messages,otherUser:s[0]}),e.setMessageToSeen(),e.scrollToBottom()})).catch((function(e){return console.log(e)}))},e.setMessageToSeen=function(){var t=e.state.messages.filter((function(t){return t.sentBy!==e.props.user._id&&!1===t.seen}));console.log("NEW MESSAGE",t),t.length>0&&f.a.put("".concat("https://my-social-portfolio.herokuapp.com","/api/message/read/").concat(t[0]._id)).then((function(e){console.log("new message updated")})).catch((function(e){return console.log(e)}))},e.mountComponent=function(){var t=e.props.match.params.id;f.a.get("".concat("https://my-social-portfolio.herokuapp.com","/api/chat/").concat(t)).then((function(t){var s=t.data.participants.filter((function(t){return t._id!==e.props.user._id}));e.setState({chat:t.data,messages:t.data.messages,otherUser:s[0]}),e.startSocket(),e.scrollToBottom()})).catch((function(e){return console.log(e)}))},e}return Object(p.a)(s,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{id:"conversation-page",children:[Object(a.jsx)("div",{id:"chat-navbar",children:Object(a.jsx)(N,{})}),Object(a.jsxs)("div",{id:"conversation-container",children:[Object(a.jsxs)("div",{className:"chat-info-bar",children:[Object(a.jsxs)("div",{className:"chat-info",children:[Object(a.jsx)(r.b,{to:"/chat",children:Object(a.jsx)("i",{class:"fas fa-angle-left"})}),Object(a.jsx)("img",{src:this.state.otherUser.image,className:"chat-user-img"}),Object(a.jsx)("p",{children:this.state.otherUser.username})]}),Object(a.jsx)("hr",{})]}),Object(a.jsx)("div",{className:"conversation",children:Object(a.jsxs)("div",{children:[this.state.messages.map((function(t,s){return t.sentBy===e.props.user._id?Object(a.jsxs)("div",{className:"message-container right",children:[Object(a.jsx)("p",{className:"message right-blue",children:t.text}),s===e.state.messages.length-1&&t.seen?Object(a.jsx)("p",{className:"seen",children:"Seen"}):null]},t._id):Object(a.jsx)("div",{className:"message-container left",children:Object(a.jsx)("p",{className:"message left-red",children:t.text})},t._id)})),Object(a.jsx)("div",{ref:function(t){e.el=t},id:"bottom-of-scroll"}),this.state.typing?Object(a.jsx)("p",{children:"typing"}):null]})}),Object(a.jsxs)("form",{onSubmit:this.handleSubmit,className:"send-message-form",children:[Object(a.jsx)("input",{type:"text",name:"text",value:this.state.text,onChange:this.handleInput,placeholder:"type something here...",required:!0}),Object(a.jsx)("button",{type:"submit",className:"send-button",children:"Send"})]})]})]})}}]),s}(n.Component));var $=C((function(e){var t=e.isLoggedIn,s=e.isLoading,n=e.component,o=e.exact,i=e.path;return s?"Loading":Object(a.jsx)(d.b,{exact:o,path:i,render:function(e){return t?Object(a.jsx)(d.a,{to:"/myprofile"}):t?void 0:Object(a.jsx)("div",{children:Object(a.jsx)(n,Object(j.a)({},e))})}})}));var ee=C((function(e){var t=e.isLoggedIn,s=e.isLoading,n=e.component,o=e.exact,i=e.path;return s?"Loading":Object(a.jsx)(d.b,{exact:o,path:i,render:function(e){return t?t?Object(a.jsx)("div",{children:Object(a.jsx)(n,Object(j.a)({},e))}):void 0:Object(a.jsx)(d.a,{to:"/login"})}})})),te=m(function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(p.a)(s,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"App",style:this.props.style,children:Object(a.jsxs)(d.d,{children:[Object(a.jsx)(d.b,{exact:!0,path:"/",component:J}),Object(a.jsx)(d.b,{exact:!0,path:"/home",component:_}),Object(a.jsx)(d.b,{exact:!0,path:"/user/:id",component:W}),Object(a.jsx)($,{exact:!0,path:"/signup",component:P}),Object(a.jsx)($,{exact:!0,path:"/login",component:F}),Object(a.jsx)(ee,{exact:!0,path:"/myprofile",component:Z}),Object(a.jsx)(ee,{exact:!0,path:"/chat",component:z}),Object(a.jsx)(ee,{exact:!0,path:"/conversation/:id",component:X})]})})}}]),s}(n.Component),"light");c.a.render(Object(a.jsx)(r.a,{children:Object(a.jsx)(k,{children:Object(a.jsx)(te,{})})}),document.getElementById("root"))},72:function(e,t,s){},89:function(e,t,s){},90:function(e,t,s){},95:function(e,t,s){},96:function(e,t,s){},97:function(e,t,s){},98:function(e,t,s){},99:function(e,t,s){}},[[145,1,2]]]);
//# sourceMappingURL=main.dd0230aa.chunk.js.map